#  Copyright 2016 Luiko Czub, Smallcases Software GmbH
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#       http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

*** Settings ***
Force Tags        gisLaunch
Library           Process
Library           ../../resources/RobotMagikLauncher.py    cli_port=${CLI_PORT}    wait=0.1s
Resource          ../../resources/robot_magik_base.txt

*** Variables ***
${CLI_PORT}       ${14001}
${SWPRODUCT}      C:${/}Smallworld${/}430${/}CST430${/}product

*** Test Cases ***
start cambridge
    [Documentation]    start magik session with a telnet connection, check if the telnet connection works and stop the session
    [Tags]    withTelnet
    ${alias}=    Set Variable    cam_db_open_swaf
    ${cli_port}=    Set Variable    ${CLI_PORT}
    ${wait}=    Set Variable    5.0
    ${swproduct}=    Set Variable    ${SWPRODUCT}
    ${msession}=    Start Magik Session    ${swproduct}    ${alias}    ${cli_port}    wait=${wait}
    Session Should Be Reachable
    #    Stop Magik Session

calc cambridge
    [Documentation]    start magik session with a telent connection, check if the telent connection works and stop the session
    [Tags]    withTelnet
    ${out}=    Open Magik Connection
    ${out}=    Execute Magik Command    3 - 2
    Should Be Equal As Integers    ${out}    1
    ${out}=    Close Magik Connection

stop cambridge
    [Documentation]    start magik session with a telent connection, check if the telent connection works and stop the session
    [Tags]    withTelnet
    Stop Magik Session
